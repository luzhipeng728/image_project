2025-02-28 14:04:59,855 [INFO] worker: 启动队列监控系统，并发工作进程数: 3
2025-02-28 14:04:59,883 [INFO] worker: 初始找到 2 个队列: image_generation_973498d440494576a0e7a9ae2d9c532a, image_generation_1ad9af0537c04c7481f3246d9ea75f08
2025-02-28 14:04:59,884 [INFO] worker: 队列发现线程已启动，将每10秒检查一次新队列
2025-02-28 14:04:59,884 [INFO] worker: 工作进程 worker-1 开始监听 2 个队列
2025-02-28 14:04:59,884 [INFO] worker: 工作进程 worker-2 开始监听 2 个队列
2025-02-28 14:04:59,884 [INFO] worker: 工作进程 worker-3 开始监听 2 个队列
2025-02-28 14:04:59,885 [INFO] rq.worker: Worker rq:worker:wangjunyan.local:worker-2 started with PID 43579, version 1.14.1
2025-02-28 14:04:59,886 [INFO] rq.worker: Subscribing to channel rq:pubsub:wangjunyan.local:worker-2
2025-02-28 14:04:59,886 [INFO] rq.worker: Worker rq:worker:wangjunyan.local:worker-3 started with PID 43579, version 1.14.1
2025-02-28 14:04:59,886 [INFO] rq.worker: Worker rq:worker:wangjunyan.local:worker-1 started with PID 43579, version 1.14.1
2025-02-28 14:04:59,886 [INFO] rq.worker: Subscribing to channel rq:pubsub:wangjunyan.local:worker-3
2025-02-28 14:04:59,886 [INFO] rq.worker: Subscribing to channel rq:pubsub:wangjunyan.local:worker-1
2025-02-28 14:04:59,886 [INFO] rq.worker: *** Listening on image_generation_973498d440494576a0e7a9ae2d9c532a, image_generation_1ad9af0537c04c7481f3246d9ea75f08...
2025-02-28 14:04:59,887 [INFO] rq.worker: *** Listening on image_generation_973498d440494576a0e7a9ae2d9c532a, image_generation_1ad9af0537c04c7481f3246d9ea75f08...
2025-02-28 14:04:59,887 [INFO] rq.worker: *** Listening on image_generation_973498d440494576a0e7a9ae2d9c532a, image_generation_1ad9af0537c04c7481f3246d9ea75f08...
2025-02-28 14:04:59,887 [ERROR] worker: 工作进程 worker-2 出错: signal only works in main thread of the main interpreter
2025-02-28 14:04:59,888 [ERROR] worker: 工作进程 worker-3 出错: signal only works in main thread of the main interpreter
2025-02-28 14:04:59,888 [ERROR] worker: 工作进程 worker-1 出错: signal only works in main thread of the main interpreter
2025-02-28 14:04:59,900 [INFO] worker: 发现 2 个新队列: image_generation_973498d440494576a0e7a9ae2d9c532a, image_generation_1ad9af0537c04c7481f3246d9ea75f08
2025-02-28 14:05:01,416 [INFO] worker: 清理 3 个旧worker注册信息
2025-02-28 14:05:01,417 [INFO] worker: 重新启动工作进程 worker-1-0ca0d1b4，监听 2 个队列
2025-02-28 14:05:01,417 [INFO] worker: 工作进程 worker-1-0ca0d1b4 开始监听 2 个队列
2025-02-28 14:05:01,417 [INFO] worker: 重新启动工作进程 worker-2-67a384ab，监听 2 个队列
2025-02-28 14:05:01,417 [INFO] worker: 工作进程 worker-2-67a384ab 开始监听 2 个队列
2025-02-28 14:05:01,417 [INFO] worker: 重新启动工作进程 worker-3-4311a563，监听 2 个队列
2025-02-28 14:05:01,417 [INFO] worker: 工作进程 worker-3-4311a563 开始监听 2 个队列
2025-02-28 14:05:01,418 [INFO] rq.worker: Worker rq:worker:wangjunyan.local:worker-1-0ca0d1b4 started with PID 43579, version 1.14.1
2025-02-28 14:05:01,418 [INFO] rq.worker: Subscribing to channel rq:pubsub:wangjunyan.local:worker-1-0ca0d1b4
2025-02-28 14:05:01,419 [INFO] rq.worker: Worker rq:worker:wangjunyan.local:worker-2-67a384ab started with PID 43579, version 1.14.1
2025-02-28 14:05:01,419 [INFO] rq.worker: Subscribing to channel rq:pubsub:wangjunyan.local:worker-2-67a384ab
2025-02-28 14:05:01,419 [INFO] rq.worker: Worker rq:worker:wangjunyan.local:worker-3-4311a563 started with PID 43579, version 1.14.1
2025-02-28 14:05:01,419 [INFO] rq.worker: Subscribing to channel rq:pubsub:wangjunyan.local:worker-3-4311a563
2025-02-28 14:05:01,420 [INFO] rq.worker: *** Listening on image_generation_973498d440494576a0e7a9ae2d9c532a, image_generation_1ad9af0537c04c7481f3246d9ea75f08...
2025-02-28 14:05:01,420 [INFO] rq.worker: *** Listening on image_generation_973498d440494576a0e7a9ae2d9c532a, image_generation_1ad9af0537c04c7481f3246d9ea75f08...
2025-02-28 14:05:01,420 [INFO] rq.worker: *** Listening on image_generation_973498d440494576a0e7a9ae2d9c532a, image_generation_1ad9af0537c04c7481f3246d9ea75f08...
2025-02-28 14:05:01,421 [ERROR] worker: 工作进程 worker-1-0ca0d1b4 出错: signal only works in main thread of the main interpreter
2025-02-28 14:05:01,421 [ERROR] worker: 工作进程 worker-2-67a384ab 出错: signal only works in main thread of the main interpreter
2025-02-28 14:05:01,421 [ERROR] worker: 工作进程 worker-3-4311a563 出错: signal only works in main thread of the main interpreter
2025-02-28 14:05:02,089 [INFO] worker: 启动队列监控系统，并发工作进程数: 1
2025-02-28 14:05:02,115 [INFO] worker: 初始找到 2 个队列: image_generation_973498d440494576a0e7a9ae2d9c532a, image_generation_1ad9af0537c04c7481f3246d9ea75f08
2025-02-28 14:05:02,115 [INFO] worker: 队列发现线程已启动，将每10秒检查一次新队列
2025-02-28 14:05:02,115 [INFO] worker: 工作进程 worker-1 开始监听 2 个队列
2025-02-28 14:05:02,116 [INFO] rq.worker: Worker rq:worker:wangjunyan.local:worker-1 started with PID 43620, version 2.1.0
2025-02-28 14:05:02,116 [INFO] rq.worker: Subscribing to channel rq:pubsub:wangjunyan.local:worker-1
2025-02-28 14:05:02,117 [INFO] rq.worker: *** Listening on image_generation_973498d440494576a0e7a9ae2d9c532a, image_generation_1ad9af0537c04c7481f3246d9ea75f08...
2025-02-28 14:05:02,117 [ERROR] worker: 工作进程 worker-1 出错: signal only works in main thread of the main interpreter
2025-02-28 14:05:02,128 [INFO] worker: 发现 2 个新队列: image_generation_973498d440494576a0e7a9ae2d9c532a, image_generation_1ad9af0537c04c7481f3246d9ea75f08
2025-02-28 14:05:02,634 [INFO] worker: 清理 4 个旧worker注册信息
2025-02-28 14:05:02,636 [INFO] worker: 重新启动工作进程 worker-1-03f7ca92，监听 2 个队列
2025-02-28 14:05:02,636 [INFO] worker: 工作进程 worker-1-03f7ca92 开始监听 2 个队列
2025-02-28 14:05:02,638 [INFO] rq.worker: Worker rq:worker:wangjunyan.local:worker-1-03f7ca92 started with PID 43620, version 2.1.0
2025-02-28 14:05:02,639 [INFO] rq.worker: Subscribing to channel rq:pubsub:wangjunyan.local:worker-1-03f7ca92
2025-02-28 14:05:02,640 [INFO] rq.worker: *** Listening on image_generation_973498d440494576a0e7a9ae2d9c532a, image_generation_1ad9af0537c04c7481f3246d9ea75f08...
2025-02-28 14:05:02,642 [ERROR] worker: 工作进程 worker-1-03f7ca92 出错: signal only works in main thread of the main interpreter
2025-02-28 14:05:36,978 [INFO] worker: 收到信号 15，准备关闭工作进程...
2025-02-28 14:05:36,995 [INFO] worker: 收到信号 15，准备关闭工作进程...
2025-02-28 14:05:39,671 [INFO] worker: 启动队列监控系统，并发工作进程数: 1
2025-02-28 14:05:39,696 [INFO] worker: 初始找到 2 个队列: image_generation_1ad9af0537c04c7481f3246d9ea75f08, image_generation_973498d440494576a0e7a9ae2d9c532a
2025-02-28 14:05:39,696 [INFO] worker: 队列发现线程已启动，将每10秒检查一次新队列
2025-02-28 14:05:39,696 [INFO] worker: 工作进程 worker-1 开始监听 2 个队列
2025-02-28 14:05:39,697 [INFO] rq.worker: Worker rq:worker:wangjunyan.local:worker-1 started with PID 44239, version 2.1.0
2025-02-28 14:05:39,697 [INFO] rq.worker: Subscribing to channel rq:pubsub:wangjunyan.local:worker-1
2025-02-28 14:05:39,698 [INFO] rq.worker: *** Listening on image_generation_1ad9af0537c04c7481f3246d9ea75f08, image_generation_973498d440494576a0e7a9ae2d9c532a...
2025-02-28 14:05:39,699 [ERROR] worker: 工作进程 worker-1 出错: signal only works in main thread of the main interpreter
2025-02-28 14:05:39,712 [INFO] worker: 发现 2 个新队列: image_generation_1ad9af0537c04c7481f3246d9ea75f08, image_generation_973498d440494576a0e7a9ae2d9c532a
2025-02-28 14:05:40,215 [INFO] worker: 清理 1 个旧worker注册信息
2025-02-28 14:05:40,215 [INFO] worker: 重新启动工作进程 worker-1-763723c0，监听 2 个队列
2025-02-28 14:05:40,215 [INFO] worker: 工作进程 worker-1-763723c0 开始监听 2 个队列
2025-02-28 14:05:40,216 [INFO] rq.worker: Worker rq:worker:wangjunyan.local:worker-1-763723c0 started with PID 44239, version 2.1.0
2025-02-28 14:05:40,216 [INFO] rq.worker: Subscribing to channel rq:pubsub:wangjunyan.local:worker-1-763723c0
2025-02-28 14:05:40,216 [INFO] rq.worker: *** Listening on image_generation_1ad9af0537c04c7481f3246d9ea75f08, image_generation_973498d440494576a0e7a9ae2d9c532a...
2025-02-28 14:05:40,217 [ERROR] worker: 工作进程 worker-1-763723c0 出错: signal only works in main thread of the main interpreter
2025-02-28 14:06:37,137 [INFO] worker: 收到信号 15，准备关闭工作进程...
2025-02-28 14:06:39,805 [INFO] worker: 启动队列监控系统，并发工作进程数: 1
2025-02-28 14:06:39,832 [INFO] worker: 初始找到 2 个队列: image_generation_973498d440494576a0e7a9ae2d9c532a, image_generation_1ad9af0537c04c7481f3246d9ea75f08
2025-02-28 14:06:39,836 [INFO] worker: 已启动工作进程 worker-1-825d03bd (PID: 45166)
2025-02-28 14:06:39,853 [INFO] worker: 发现 2 个新队列: image_generation_973498d440494576a0e7a9ae2d9c532a, image_generation_1ad9af0537c04c7481f3246d9ea75f08
2025-02-28 14:06:39,853 [INFO] worker: 队列发生变化，重启所有工作进程以监听 2 个队列
2025-02-28 14:06:39,855 [INFO] worker: 已启动工作进程 worker-1-cd83d514 (PID: 45168)
2025-02-28 14:06:39,912 [INFO] worker: 工作进程 worker-1-cd83d514 (PID: 45168) 开始监听 2 个队列
2025-02-28 14:06:39,915 [INFO] rq.worker: Worker rq:worker:wangjunyan.local:worker-1-cd83d514 started with PID 45168, version 2.1.0
2025-02-28 14:06:39,915 [INFO] rq.worker: Subscribing to channel rq:pubsub:wangjunyan.local:worker-1-cd83d514
2025-02-28 14:06:39,916 [INFO] rq.worker: *** Listening on image_generation_973498d440494576a0e7a9ae2d9c532a, image_generation_1ad9af0537c04c7481f3246d9ea75f08...
2025-02-28 14:06:39,917 [INFO] rq.worker: Cleaning registries for queue: image_generation_973498d440494576a0e7a9ae2d9c532a
2025-02-28 14:06:39,918 [INFO] rq.worker: Cleaning registries for queue: image_generation_1ad9af0537c04c7481f3246d9ea75f08
2025-02-28 14:06:39,921 [INFO] rq.worker: image_generation_973498d440494576a0e7a9ae2d9c532a: app.services.queue.worker.process_image_task({'image_id': 233, 'image_url': 'http://localhost:8002/uploads/projects/1/图标...) (image_generation_973498d440494576a0e7a9ae2d9c532a_233_15012e987ba14da1bb2f2fc5b4fc2a1f)
2025-02-28 14:06:39,930 [INFO] app.services.queue.worker: 开始处理任务: queue_id=image_generation_973498d440494576a0e7a9ae2d9c532a, image_id=233
2025-02-28 14:06:40,021 [INFO] app.services.queue.worker: 生成变体 1/3: queue_id=image_generation_973498d440494576a0e7a9ae2d9c532a, image_id=233
2025-02-28 14:06:40,022 [INFO] root: 开始图像到图像生成 - 源图片: http://localhost:8002/uploads/projects/1/图标_安卓数据线.png, 提示词: 参考以上图片，保留图片中的整体风格，生成一张优化后的图片，生成的图片描述必须是英文，图片中的存在文字...
2025-02-28 14:06:40,022 [INFO] root: 转换为绝对路径: /Users/wangjunyan/image_project/backend/uploads/projects/1/图标_安卓数据线.png
2025-02-28 14:06:40,031 [INFO] root: 开始调用API生成图片 - 模型: black-forest-labs/FLUX-1-schnell
2025-02-28 14:06:47,233 [INFO] worker: 收到信号 15，关闭所有工作进程...
2025-02-28 14:06:47,234 [INFO] rq.worker: Worker wangjunyan.local:worker-1-cd83d514 [PID 45168]: warm shut down requested
2025-02-28 14:06:49,236 [WARNING] rq.worker: Cold shut down
2025-02-28 14:06:49,236 [INFO] rq.worker: Killed horse pid 45169
2025-02-28 14:06:49,243 [INFO] rq.worker: Unsubscribing from channel rq:pubsub:wangjunyan.local:worker-1-cd83d514
